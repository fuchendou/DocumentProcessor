工业领域下的分布式索引算法

测试方案

2023年12月

# 目录

1 背景介绍   
2 性能测试

# 2.1 测试内容

2.1.1 工业领域百万级数据分布式存储 1  
2.1.2 工业领域索引算法性能检测. Y  
2.1.3 工业场景下准确的数据推荐模型.  
2.1.4 工业领域意图识别模型.  
2.1.5 工业领域推荐算法.. .6  
2.1.6 工业领域知识图谱推理算法. 7

# 2.2 测试方法. 4

2.2.1 工业领域百万级数据分布式存储 4  
2.2.2 工业领域索引算法性能检测  
2.2.3 工业场景下准确的数据推荐模型  
2.2.4 工业领域意图识别模型  
2.2.5 工业领域推荐算法 .6  
2.2.6 工业领域知识图谱推理算法.

# 3 测试环境

4 测试时间地点 28  
5 参考文献 28

# 1 背景介绍

随着技术的不断进步，工业场景下检索也越来越受到关注了。人们不仅仅满足于模型在标准数据集上的表现，更希望它们在真实的工业应用环境中也能够稳定可靠地工作。然而，实现这一目标面临着一些重要的挑战。工业环境与干净的标准训练数据集存在着差异，数据的分布情况可能会发生变化，来源也更为丰富，这意味着我们思考如何更好地设计系统和算法。

随着深度学习技术的发展，工业分布式检索在实践中取得了一些重要的突破。然而，由于缺乏对先验知识和数据本身的整理，工业分布式检索的过程仍然比较复杂，很难在不同的工业场景中进行迁移和推广。这导致了算法在做出决策和检索时的性能不佳，限制了工业分布式检索在各种应用场景中的适用性。

# 2 性能测试

本课题以工业多场景下的数据源作为来源，分别研究了工业数据分布式存储和索引算法、意图识别、推荐推理算法。本测试大纲规定了测试内容、测试方法、技术指标、测试环境和条件。

# 2.1 测试内容

# 2.1.1 工业领域百万级数据分布式存储

项目的数据来源于多个工业场景，涉及装备制造、行业制药等领域，同时涵盖了生产、检测、归因等多个环节。在实际生产过程中，各个企业会将不同流程的数据置放于不同的库中，这要求我们在对多个企业的数据进行处理时，客观上必须进行分布式的存储，从而保证必要的安全。

项目的数据量达到了百万量级，最直接的诉求在于数据本身的表示以及处理上。对于企业而言，往往会将结构化的数据直接存储在数据库中，而其中又夹杂了大量自动化数据。因此，在我们处理数据时，要先对数据的质量进行筛选，剔除一部分"脏"数据，同时，整理数据属性之间的关系图，构建图谱，从而为后续实现多源的检索打下了基础。

为了让数据本身是否达到数量和分布式的要求，项目将数据分为了结构化数据和图谱数据进行分别存储，并加以实现检索，同时加入了决策库等工业知识作为补充。

将工业数据处理整理到库中后进行测试，拟达到的性能指标：实现数据的分布式存储和数据总量达到百万级。

# 指标名称：

工业领域百万级数据分布式存储

# 完成时指标值：

1、工业数据量达到百万级；  
2、工业数据根据自身结构存储在多个库中。

# 具体测试内容：

1、测试结构化数据（江中、保隆、商飞）的数据规模；测试数据特征主要包括数据的存储信息、属性特征等特点。

2、测试图谱化数据（上汽）的数据规模；测试数据特征主要包

括数据的存储信息、属性特征等特点。

# 2.1.2工业领域索引算法性能检测

索引算法的设计和实现是让用户按照自然语言的输入，能够高效地从相关的库中查询到较高匹配度的答案的关键技术。而索引是一种常见的数据库优化手段，设计优良的索引能够大幅提升数据库的查询效率，提升并发能力。本项目根据不同场景、不同类型下的数据，构建不同的索引，针对结构化数据，选取实际场景中具有唯一性标识的属性（工单、物品等）建立索引，针对图谱化数据，选取实体节点建立索引。

将算法集成到应用示范平台后进行测试，拟达到的性能指标：在三个任务中系统根据索引进行随机检索测试，结果准确率高于$8 0 \%$ 。

# 指标名称：

工业领域索引算法性能检测

# 完成时指标值：

1、结构化数据索引检测性能大于 $6 5 \%$   
2、图谱化数据索引检测性能大于 $6 5 \%$ 0

# 具体测试内容：

基于工业领域数据集（江中、保隆、上汽、商飞），分别从不同库中随机对索引进行抽样检索，记录下随机抽样的索引值以及返回的结果。

# 2.1.3工业场景下准确的数据推荐模型

在设计工业领域数据推荐模型的测试方案时，关键在于验证模型是否能够准确识别和处理工业专业术语和概念，并据此提供相关且有价值的数据推荐。首先，需要准备包含丰富工业术语的文本数据集，如技术文档和研究报告，用于训练和测试模型。模型训练应重点在于使其理解行业特有的语言和概念。在性能测试阶段，通过句子相似度以及权重系数分析检测模型对专业术语的处理能力，并评估其推荐的准确性和相关性。同时，通过分析推荐成功案例的归因，验证模型在理解行业需求方面的效果。

为了全面评估模型的准确性和实用性，收集行业专家和用户反馈至关重要，这有助于了解模型推荐的准确性和实用性。基于这些反馈，对模型进行调整和优化，确保其能够持续提供高质量的推荐。结果评估将侧重于三个主要方面：推荐准确性、相关性以及用户满意度。通过这种综合评估方法，可以确保模型不仅能处理复杂的工业数据，还能根据用户的具体需求提供高效、精准的数据推荐。

为测试工业领域数据以及相关权重系数对于提高推荐结果准确性的影响，项目将对两类推荐方法的结果进行归因分析并加以比较：一类为无相关权重支撑的推荐，另一类为有相关权重支撑的推荐。两个方法都在江中、保隆和商飞提供的数据集上进行测试。

# 指标名称：

数据推荐模型的推荐准确性，

# 完成时指标值：

相比无相关权重支撑的数据推荐的准确率提高 $5 \%$ 0

# 具体测试内容：

（1）测试无相关权重支撑的推荐算法对江中提供的数据集推断的准确率；测试有相关权重支撑的推荐算法对江中提供的数据集推断的准确率；计算在江中提供的数据集数据推荐任务中，有相关权重支撑的推荐算法相比无相关权重支撑的推荐算法准确率的提升效果。

（2）测试无相关权重支撑的推荐算法对保隆提供的数据集推断的准确率；测试有相关权重支撑的推荐算法对保隆提供的数据集推断的准确率；计算在对保隆提供的数据集推荐任务中，有相关权重支撑的推荐算法相比无相关权重支撑的推荐算法准确率的提升效果。

（3）测试无相关权重支撑的推荐算法对商飞提供的数据集推断的准确率；测试有相关权重支撑的推荐算法对商飞提供的数据集推断的准确率；计算在对商飞提供的数据集推荐任务中，有相关权重支撑的推荐算法相比无相关权重支撑的推荐算法准确率的提升效果。

# 2.1.4工业领域意图识别模型

意图识别模型的设计和实现是让系统能够高效地根据自然语言输入，准确地识别用户意图的关键技术。

针对工业领域文本数据，标注出问答语句的意图，基于深度学习模型，本项目构建了工业领域意图识别模型。模型最红能够准确识别用户意图的比例高于 $6 5 \%$ 0

# 指标名称：

工业领域意图识别算法性能检测

# 完成时指标值：

意图识别准确率达到65%以上。

# 具体测试内容：

基于工业领域数据集（保隆和上汽），从中选择问句进行随机抽样测试，对验证集中的数据进行意图识别并返回识别结果。

# 2.1.5工业领域推荐算法

在工业应用中，推荐系统通常可分为两部分：召回和排序。推荐技术主要处理的是问答或搜索系统的搜索结果候选集。利用推荐模型将搜索得到的结果集经过召回阶段和排序阶段，得到最终的结果展示给用户。

项目数据涉及工业领域的多个场景，与其他领域不同，工业领域下的推荐场景复杂且专业性较强，推荐结果需要包含多方面的内容，而不是单值对应，因此工业领域的推荐算法不仅要满足快速响应以及降低信息过载的要求，还要加深对用户的了解，为其提供定制化服务。因此合适的推荐算法可以帮助优化设备维护计划，减少人工投入，提高生产效率，并确保产品质量。本项目利用决策库数据，该数据来自已完成工单，包含工单信息、产品的配方信息、物料信息以及工艺状态信息等，通过每条信息的工单号或产品名称等属性，将相关的完整方案推荐给用户。

将算法集成到应用示范平台后进行测试，拟达到的性能指标：在已完成工单所构成的决策库数据中根据具有唯一标识性的词条进行随机测试，将推荐结果输出。

# 指标名称：

工业领域推荐算法性能检测。。

# 完成时指标值：

1.推荐结果的数量;  
2.输出推荐方案并评价推荐结果的准确率达到 $6 5 \%$ 以上。

# 具体测试内容：

基于工业领域数据集（江中），从决策库中进行随机抽样测试，对输入的信息进行关键词匹配并返回推荐结果。

# 2.1.6工业领域知识图谱推理算法

工业领域知识图谱推理是一种基于知识图谱的智能推理技术，旨在通过整合和分析工业领域的复杂知识结构，进行逻辑推断和决策支持。这涉及建立知识建模，其中节点表示实体（如设备、工艺、质量等），边表示它们之间的关系，而推理引擎则通过这些关系进行推断，为知识补全，推荐，智能问答等下游任务提供支撑。

具体而言，先设计Drools推理引擎与专家先验知识规则库。其次编写业务逻辑功能对输入数据进行解析，得到规范输入结果后进行推理。最后通过接口返回。

算法的输入为图谱三元组数据，经过推理模块得到知识补全后的增强三元组，测试指标为推理出三元组的规模，规模越大说明推理补全的效果越好。

# 指标名称：

工业领域知识图谱推理算法，

# 测试指标：

推理出新三元组的规模

# 具体测试内容：

基于工业故障溯源数据集（保隆），通过意图识别得到的用户意图，在推荐模块中获取相应的推荐结果，若无推荐结果则执行推理模块得到推理结果。

# 2.2测试方法

# 2.2.1 工业领域百万级数据分布式存储

针对工业数据的分布式存储，要求合理地将数据中的信息提取出来并存储到合适的存储介质中。为了评价分布式存储的性能，采用数据量和数据源作为定量指标。

测试中对拟达到的性能指标采取下述测试步骤完成测试：

(1）针对图谱结构的数据：进入智能制造过程知识获取平台，选择资产管理，点击图谱资产，用户即可在我的资产中查看相关的图谱信息，涉及所属资源组、使用说明书、资产描述、实体以及关系等等信息。

(②) 针对结构化的数据：输入数据来源和点击"查看库信息"按钮，用户即可查看库的信息、数据的属性、数量以及示例等等。

表1工业领域百万级测试数据记录表  

<html><body><table><tr><td>测试项目</td><td>技术要求</td><td>检验结果</td><td>判定</td></tr><tr><td>百万级 工业数据</td><td>1.数据规模达到百万级； 2.数据分布式存储。</td><td></td><td></td></tr></table></body></html>

# 2.2.2工业领域索引算法性能检测

对结构化数据和图谱化数据索引性能进行检测，对随机获得的索引进行检索、获得的结果中出现索引时则是未正确，评估指标是用户输入一个数据批量下的索引查询的成功率。

表2数据集介绍  

<html><body><table><tr><td>测试项目</td><td>数据集名称</td><td>数据集介绍</td></tr><tr><td rowspan="2">百万级 索引检索 性能测试</td><td>保隆数据集</td><td>包含36514条质量溯源信息，共涉及15条产线，保 存了大量有关设备故障的信息，如设备故障的的起止 时间、故障原因以及处理手段、造成的影响等等。</td></tr><tr><td>江中数据集</td><td>1.江中决策库：包含105370条生产决策信息，主要 有工单信息、产品的配方信息、物料信息以及工艺 状态信息等等。 2.江中MES库：包含799901条生产进程信息，主要 有组件信息、PI信息以及执行状态等等。</td></tr><tr><td rowspan="2"></td><td>商飞数据集</td><td>包含5067条飞机运行故障信息，主要涉及飞机故障 的时间、故障描述和处理措施以及相关历史记录等</td></tr><tr><td>上汽数据集</td><td>等。 包含424840实体、84457关系信息，主要用于上汽 通用设备维修问答辅助。</td></tr></table></body></html>

表3结构化数据字段展示  

<html><body><table><tr><td>测试项目</td><td>数据集名称</td><td>字段展示</td></tr><tr><td rowspan="2">百万级 索引检索 性能测试</td><td>保隆数据集</td><td>"date": "2021.01.02", Iime_name"：发射机05线” 故障起正时间"："20:15-20:19", "累计时间（分钟）"："4"， "累计次数":"1", "是否停线"："是", "phenomenon": "胶用完", "method":"换胶", "label":"7更换耗材", "department": "生产部", "记录人"："刘宝宝" d高组装工位</td></tr><tr><td>江据 策库）</td><td>"工单号":"W210128031", "工单状态":"生产终止工单" 物料状态 物称：初元牌复合肽营养饮品(I型)-半成品"， "设备编码":null, "设备状态"：null, “工艺编码”： "HRJZ_CYFHT2_MAINLMID', 艺时文本参数 数值</td></tr><tr><td></td><td>商飞数据集</td><td>"发生日期":"2018/3/19", "机号"："B-3387（108）", "标题":"B-3387飞机RPACKFAIL" “故障描述"："B-3387执行成都-合肥航班，机组反映成都航前地面 吉动友发信，关APU时出现R”PACK FAIL的EICAS信惫”伴CMS信意 ECS FAILED WIRING FCV2 FAIL CLOSED，重置IASC1&2跳开芙 故障信息消失，返程正常。 果计AS2 美正常，故障呆现，钎划后续气行窥紫。 风险描述” null, 查 熬障":null, 多发性敌障"：mull</td></tr><tr><td></td><td>上汽数据集</td><td>"id": 541288, "color": null</td></tr></table></body></html>

一级制造商 设备文档二级制造商 设备文档详细失效原因 设备文档页面失效模式 设备验证失效现象 质量验证属性信息 逻辑程序工位 问题解决报告工艺 零件异常状态执行程序报警历史操作动作故障类型故障编码标准件标准文档标准章节标准要求正常状态生产线电气图纸号维修工设备动作设备名称

![](images/2e5884ef75a90a9bbcec3551637663eeba289facd56d7f1e39a032d00b918675.jpg)
图1图谱数据schema图展示

# 测试过程：

假设：由于保隆、江中以及商飞数据集之间存在场景、属性差异，各个测试均在各自数据集上进行测试。

输入:a)场景标签label;b)目标属性值f1、f2、f3;

输出：根据准确度排名返回其结果；否则，返回一个指示未找到的值。

步骤:

1.根据label进入对应的库，准备检索。

2.初始化一个变量i为0，表示当前查找的索引。

3.从列表的第一个元素开始，逐个与目标属性进行比较

4.使用字符串相似度计算三个目标属性值与表中属性值之间的相似度L1、L2和L3,通过公式Sim=w1\*L1+ w2\*L2 +w3\*L3计算得到相似度Sim(有关权重算法△具体的细节见下方)

5.重复步骤2-5直到找到相似元素或遍历完整个库。

6.如果遍历完整个库都没有找到相似元素，则返回没有。

7．舞集弄拜季返凹在一个数量范围内按照相似度Sim高

8.综合以上过程得到准确率公式：

precision = ∑=1 Sim(f1,f2,f3)\*△(f1,f2,f3)(n:a default value)

# 测试样例：

以下主要展示检索结果的示意图，考虑到数据集的庞大，故将整体展示分为三个数量级：千级、万级以及十万级，各自选用数据集为商飞数据集（5000左左右）。

![](images/656da6c2d9fa9f6790ad06dbda6cc8a85094e10b46214459bb0ce5701865a47c.jpg)  
图2千级数据规模展示（商飞数据集）

从上到下，数据依次代表飞机号、故障主题、故障处理情况

<html><body><table><tr><td>针对查询条件【（机号：B-602T）（标题：备用磁罗盘）（故障描述：）】的结果为：</td></tr><tr><td>平均准确率为0.8799999999999999</td></tr><tr><td>针对ID为1409的记录，发生于2020/3/12，飞机号为B-602T （117），故障标题为备用磁罗盘表盘有裂纹，故障描述为航前发现备用磁罗盘表盘有裂纹（大约2点钟位置），从表盘边缘延续至中间位置，裂纹周围无受</td></tr><tr><td>力撞击迹象。，采取的措施为MMEL无备用磁罗盘损伤放行条目，待航材到件后更换。。。，历史情况及其他信息为2020/1/1，B-603M（120）出现过一次相 同问题，更换了备用磁罗盘。，风险描述为None。 精度为0.9999999999999999。 针对ID为2323的记录，发生于2020/12/30，飞机号为B-602T</td></tr><tr><td>（117），故障标题为备用磁罗盘表盘玻璃有裂纹，故障描述为航后检查发现备用磁罗盘表盘玻璃有裂纹，裂纹周围无受力撞击迹象，裂纹处表盘光滑，无 液体渗漏等其他损伤迹象。，采取的措施为按AM34-23-01进行备用磁罗盘检查，检查正常。，历史情况及其他信息为由于目前航材无货，按服务请求答复 单临时放行。1月1日120架机表盘破损、3月12日117架机表盘裂纹、6月3日19架机背景灯不亮、12月11日147架机指示误差较大，风险描述为None。 精度为0.9999999999999999.</td></tr><tr><td>针对ID为775的记录，发生于2019/6/27，飞机号为B-602T （117），故障标题为登机门临近传感器磕伤，故障描述为登机门临近传感器磕伤，采取的措施为设计人员观察磕伤情况，并记录关门行程中标靶与传感器 位置关系，待分析。7月7日登机门临近传感器航材到货，机务按手册更换后，测试正常。，历史情况及其他信息为经查，未收到运营机队反映登机门临近传 感器磕伤问题。，风险描述为None。 精度为0.7999999999999999。</td></tr><tr><td>针对ID为800的记录，发生于2019/7/7，飞机号为B-602T （117），故障标题为CAS信息RTRUFAIL，故障描述为鄂尔多斯短停时，飞机地面重新上电，APU供电时，出现CAS信息RTRUFAIL，CMS信息GCUAR</td></tr><tr><td>TRU/AGCU/CURRENTWRGFAULT，机务按MEL办理保留。，采取的措施为航后机务对串AGCU和GCU1，故障未转移，与B-602S对串RTRU，故障未转移，量线检查A GCU（U1-2403）电气插座（R5-2408）和RTRU（U1-2145）电气插头（P1-2432B）的PinA-A10至Pin15和PinA-B10至Pin7均导通，计划提服务请求寻求进一步</td></tr><tr><td>排故方案。8日通过串件判断RTRU接触器故障，待件更换。。。10日更换RTRUC（P/N:229CC2Y0,S/N:OFF3203,ON4098），历史情况及其他信息为经 查，未收到运营机队反映TRUFAIL信息。，风险描述为None。精度为0.7999999999999999。 针对ID为801的记录，发生于2019/7/7，飞机号为B-602T</td></tr></table></body></html>

# 图3万级数据规模展示（保隆数据集）

![](images/df97702fbe534412b40c3fc1543051ec73efdfc6d82bc7c9578f1b50f852149d.jpg)

从上到下，数据依次代表产线名称、工位名称、故障情况

针对查询条件【（产线：发射机05线）（工位：功率测试）（故障现象：测试不良）】的结果为：  
平均准确率为0.9673564189136126  
针对ID为56的记录，发生于2021.01.03，产线名称为发射机05线，工位名称为功率测试，故障起止时间为20:37-22:33，累计时间为21分钟，累计次数为4次，是否停线为是，故障现象为为1#暗箱测试不良，处理手段为扫码器扫码不良，调整扫码器参数，label为1设备故障，责任部门为制造工程部，记录人为刘宝宝。 精度为0.9999999999999999。  
针对ID为2521的记录，发生于2021.01.23，产线名称为发射机05线，工位名称为功率测试，故障起止时间为08:25-08:30，累计时间为15分钟，累计次数为23次，是否停线为是，故障现象为为取料失败/2#暗箱测试不良，手柄唤醒，频谱仪峰值不跳动，处理手段为复位重启/排查线路，重启频谱仪，重新点检样件，1abe1为1设备故障，责任部门为制造工程部，记录人为欧林。 精度为0.9999999999999999。  
针对ID为3503的记录，发生于2021.02.04，产线名称为发射机05线，工位名称为功率测试，故障起止时间为15:40-15:50，累计时间为10分钟，累计次数为1次，是否停线为是，故障现象为为测试不良，处理手段为重新点检好坏样件，label为6可疑品推出，责任部门为制造工程部，记录人为谢世军。精度为0.9999999999999999。  
针对ID为29603的记录，发生于1-12白，产线名称为发射机05线，工位名称为功率测试，故障起止时间为8：00-20:00，累计时间为20分钟，累计次数为1次，是否停线为是，故障现象为为供应商测量加工件尺寸，处理手段为，label为1设备故障，责任部门为制造工程科，记录人为欧林。精度为0.94916704081373。  
针对ID为18222的记录，发生于2021.07.24，产线名称为发射机05线，工位名称为功率测试，故障起止时间为8:15-8:45，累计时间为30分钟，累计次数为1次，是否停线为是，故障现象为为功率值不在范围，处理手段为重启电脑，label为1设备故障，责任部门为制造工程科，记录人为金仁杰。 精度为0.9488837275810392。  
针对ID为6433的记录，发生于2021.3.12，产线名称为发射机05线，工位名称为功率测试，故障起止时间为11:4-11:51，累计时间为18分钟，累计次数为3次，是否停线为是，故障现象为为放料报警，处理手段为调整放料位置，label为1设备故障，责任部门为制造工程部，记录人为金仁杰。 精度为0.9473358964890691。  
针对ID为17389的记录，发生于2021.07.16，产线名称为发射机05线，工位名称为功率测试，故障起止时间为20:27-5:07，累计时间为39分钟，累计次数为5次，是否停线为是，故障现象为为功率测试值不在范围，处理手段为重新点检样件，label为4参数补偿，责任部门为工艺部，记录人为欧林。 精度为0.9467896666120881。  
针对ID为16925的记录，发生于2021.07.12，产线名称为发射机05线，工位名称为功率测试，故障起止时间为10:53-1:00，累计时间为7分钟，累计次数为1次，是否停线为是，故障现象为为吸产品不良报警，处理手段为复位，label为1设备故障，责任部门为制造工程科，记录人为金仁杰。精度为0.9466750198129747。

# 图4十万级数据规模展示（江中数据集）

![](images/d57a5728d51c08bf6478efd285b839217d919d630819e9fbad8025f9ae285e65.jpg)

从上到下，数据依次代表工单名称、组件唯一ID号、PI编码

针对查询条件【（工单号：W211021067）（组件唯一ID：P33056873732_1）（PI编码：HRJZ_RSJSP_04_MAIN_8_1）】的结果为：  
平均精度为0.7  
针对ID000998e8记，，境唯D6，编为JNS，PI版本号为0，step当前状态为0，新状态为1，执行次数为1，循环次数为225140，组件类型为PageStep，PI路径为P3638959458_1;；，编辑时间为2021-11-0718:04:45。 精度为0.7。  
针对ID为001f0976d8df8ccc的记录，工单为107，环境为70，组件唯一D为44148，编码为J_SPI版本号为0，step当前状态为0，新状态为1，执行次数为1，循环次数为171448，组件类型为PageStep，PI路径为P3638959458_1；，编辑时间为2021-11-0521:20:09。 精度为0.7。  
针对ID为00048df6bdad8a814a5的记录，工单为107，环境D0，组件唯一D为462054910649，P编码为KSY，PI版本号为0，step当前状态为0，新状态为1，执行次数为1，循环次数为220649，组件类型为PageStep，PI路径为P3638959458_1;；，编辑时间为2021-11-0714:20:12。 精度为0.7。  
针对ID为0009bf374b7a7979f86a的记录，工单号为2102067，环境I为7，组件唯D为P44625191_67，编码为JZ_SFNSYPI版本号为0，step当前状态为0，新状态为1，执行次数为1，循环次数为267573，组件类型为PageStep，PI路径为P3638959458_1;，编辑时间为2021-1-0905:26:24。 精度为0.7。  
针对ID为00047c80cdd0026eba25记录，工单号为0067，环境D为7，组件唯一D为46205115759，P编码为ZSY，PI版本号为0，step当前状态为0，新状态为1，执行次数为1，循环次数为57591，组件类型为PageStep，PI路径为P36338959458_1;，编辑时间为2021-11-0122:27:18。 精度为0.7。

表3工业领域索引算法性能检测数据记录表  

<html><body><table><tr><td>测试项目</td><td>技术要求</td><td>检验结果</td><td>判定</td></tr><tr><td>任务1</td><td>在结构化数据集上索引检测准确率高于65%</td><td></td><td></td></tr><tr><td>任务2</td><td>在图谱化数据集上索引检测准确率高于65%</td><td></td><td></td></tr></table></body></html>

# 2.2.3 数据推荐模型

针对推荐数据的准确性测试，要求将用户真正在意的数据推断出来。为了评价基于相关权重支撑的数据推荐的性能，采用命中率作为定量指标。

Hit Rate：命中率，即命中次数（推荐出来的数据中包含相关数据的次数）/测试次数。将总测试次数设为t，其中命中数据的次数设为h，则命中率为 $( \mathrm { h } / \mathrm { t } { \times } 1 0 0 \% )$ 。

测试中对拟达到的性能指标采取下述测试步骤完成测试：

（1）无相关权重支撑的推荐方法：输入测试数据，使用Ber进行编码，计算相似系数，仅利用相似系数判断是否进行推荐，计算命中率。（2）有相关权重支撑的推荐方法：输入测试数据，使用Bert进行编码，计算相似系数，利用相似系数以及相关权重判断是否进行推荐，计算命中率。（3）若有相关权重支撑的推荐命中率相较于无相关权重支撑的推荐命中率提高 $5 \%$ ，则测试通过。

表4数据推荐的准确性测试数据记录表  

<html><body><table><tr><td>测试项目</td><td>技术要求</td><td>检验结果</td><td>判定</td></tr><tr><td>数据推荐 的准确性</td><td>相比无相关权重支撑的推荐算法命中率提 高5%</td><td></td><td></td></tr></table></body></html>

# $\bullet$ 江中数据集推断的准确率

# 测试过程：

（1）从江中提供的配方数据中随机抽取1万条数据进行测试，其他数据作为训练集。

（2）使用训练集训练无相关权重支撑的推荐算法，使用测试集对训练后的算法进行测试，计算算法命中率a；使用训练集训练有相关权重支撑的推荐算法，使用测试集对训练后的算法进行测试，计算算法推断命中率b。计算有相关权重支撑的推荐算法推荐命中率b与无相关权重支撑的推荐算法推荐命中率a的差c。

（3）过程1、2，重复3次，分别记录a1、a2、a3、b1、b2、b3、c1、c2、c3。预期结果：3次提升效果（ $c / \mathsf { a } \times 1 0 0 \%$ ）均大于等于 $5 \%$ 0

# 保隆数据集推荐准确率

# 测试过程：

（1）从保隆提供的故障描述数据中随机抽取2万条数据作为测试集，其他数据作为训练集。（2）使用训练集训练无相关权重支撑的推荐算法，使用测试集对训练后的算法进行测试，计算算法命中率a；使用训练集训练有相关权重支撑的推荐算法，使用测试集对训练后的算法进行测试，计算算法推断命中率b。计算有相关权重支撑的推荐算法推荐命中率b与无相关权重支撑的推荐算法推荐命中率a的差c

（3）过程1、2，重复3次，分别记录a1、a2、a3、b1、b2、b3、c1、c2、c3。预期结果：3次提升效果（ $\mathsf { c } / \mathsf { a } \times 1 0 0 \%$ ）均大于等于 $5 \%$ 。

# 商飞数据集推断的准确率

# 测试过程：

（1）从商飞提供的故障描述数据中随机抽取2万条数据进行测试。（2）使用训练集训练无相关权重支撑的推荐算法，使用测试集对训练后的算法进行测试，

计算算法命中率a；使用训练集训练有相关权重支撑的推荐算法，使用测试集对训练后的算法进行测试，计算算法推断命中率b。计算有相关权重支撑的推荐算法推荐命中率b与无相关权重支撑的推荐算法推荐命中率a的差c。

（3）过程1、2，重复3次，分别记录al、a2、a3、b1、b2、b3、c1、c2、c3.预期结果：3次提升效果（ $\mathsf { c } / \mathsf { a } \times 1 0 0 \%$ ）均大于等于 $5 \%$ 0

# 2.2.4工业领域意图识别模型

对工业故障溯源数据集进行随机测试，通过用户的输入进行意图识别，针对文本的意图和其中的实体，进行识别，将最终的意图类别输出，将最终得到的意图识别的准确率作为性能指标。

表5数据集介绍  

<html><body><table><tr><td>测试项目</td><td>数据集名称</td><td>数据集介绍</td></tr><tr><td>意图识别</td><td>保隆和上汽</td><td>共包含12007条数据，共有8种意图类别，分别是：失 效模式、失效原因、失效影响、处理方式、故障 类别、故障起止时间、故障现象、责任部门。</td></tr></table></body></html>

在工业领域数据集（保隆和上汽）数据中，按照比例6:4，随机选择4803条语句作为验证集。模型将对文本进行意图识别，使用意图识别准确率作为评价指标，准确率即为预测正确的结果占总样本的百分率，计算公式如下式所示：

$$
\mathrm { A c c u r a c y } = { \frac { \mathrm { T P } + \mathrm { T N } } { \mathrm { T P } + \mathrm { F P } + \mathrm { T N } + \mathrm { F N } } }
$$

公式中TP为预测结果为正例，实际结果也为正例；TN表示预测结果为负例，且实际结果也为负例；FP，FN分别代表预测结果为正例结果为负例和预测结果为负例结果正例。使用Pycharm软件，在dataset目录下选择processed,可以使用data_trains.py文件，随机挑选4803条数据传入valid.tsv文件，也可以手动将随机挑选传入文件中。

测试过程：

ERNIE-intent-detection)pyeie)dataset) processed) datatspy■ 幸 = (β data_trars-py ×vERNIE-Intent-detection C\Userssues\Deskop/E 1 inpeet pandas as pdv b pyemnie 2>Brcalak 3心 ts= data.tsy 显示上下文操作 Alt + Enter普模成你的文v bt datanet 5 山 data = pd.read_csv(file_path, sep=\*\ 好算要拙职的数量 精 复 Alt sftrsese Ctrl+VPdea tars py B total_sanples = Len(data) 查找用法U Alt +F7il train.tsv 9 percentage_<0 = 0.4 重构(E) 》i valid.tsv 1B 播 >>b raw 11 nun_sanples_48 = Int(total_sanples +β_init_py 12 >)bt io 13 随机抽取百分之49的数据 生 Alt +lmsert)bI model 14 randon_sanple_40 = data.sanple(n=nzt 运行3datatrans1uy Ctrl+Shift+F10>Dl output )br peprocesig 15 16 获取利下未抽取的数据 骨式data_trans'(D) 更多运行/两式 >)br train 1. renaining_data = data.drop(randon_sal 打开于 >_mt_py 1819 将拾取的数据保存到一个文件中 本地历史纪录山 >_init_-py 28 randon_sanpte_4B,to_csv(\*valid.tsv°, 执行 Python 经制台中的代股行 Alt+Shift+E>(β convert_emie_to_pytorch.py 21 运行Python控制台中的文件fine_tune_ernie.py 22 将看下的数据保存到另一个文件中 与剪贴模比24 renaining_data,to_csv('train.tsv', si Gt >img_3prgimg_4.pngimg_5.prgS REANME md

测试数据集准备完成后，点击fine_tune_ernie.py文件，并右键点击运行。

ERNIE-intent-detection β fine_tune_ernie.py■嘲 ? ÷ 拿 - fine_tune_emie.py ×V ERNIE-intent-detectien C\Users,sues\(Desktop/EF 1 #encoding:utf-8ν bl pyemie 2 isport torch>b callback 3 isport warningsb config 山 fro# pyernie.train.netrics iaport F1Score>bI dataset 5 from pyernie.train.losses import CrossEntropy>Dio>D model 5 from pyernie.train.traf 是示上下文操作 Alt + Enter>b[ ptprtcesing 下# fro torche1n.taet 私精殊 CttV>>test 1 from pyernie.utils.t √列选择模式(M) Alt+Shilt+Insert>br utils 11 from pyernie.callback.1 直找用法U) Alt+F7_init_-py 12 fro# pyernie.nodel.nn.e 重构(B) >1314 fron pyernie-troadtatr 5 AA15 from pyernie.config.basimg.png 151711 2 生. Crmistho0 Alt +lnsertimg_5.png 2B 打开于 >README-mpd.md 21 2 dfn: 本地历史记录(出] Ail requirements.bxt 23 \*大大\*\*全全\*\*大大\*\* 执行 Python控制台中的代马行 Alt+Shift+E\*\*\*\*> 血外部库 24 Logger = init_logge 1 运行 Python控制台中的文件 fig['log_dir'])> 临时文件和控制台 25 Logger.info("seed 1 与题贴板比较面2.5 device = \*cuda:%d\* 五表 gpu\*])else 'cpu\*27 seed evervthingfsee eRt Gist..

在下方根据评价指标显示测试结果，

![](images/c7e89217197d008c4c1764c923c6efcfdd5985bb2a194d8a7aa551e1a4e1a8b8.jpg)  
-validresult

![](images/e1dde36d295b4cdc72770655d4c00b391d91f13c58015d8ba423a0c340325940.jpg)  
图7意图识别算法模型测试结果

表6工业领域意图识别算法性能检测数据记录表  

<html><body><table><tr><td>测试项目</td><td>技术要求</td><td>检验 结果</td><td>判 定</td></tr><tr><td>工业领域意图识 别算法性能检测</td><td>1、意图识别的准确率达到65% 以上。</td><td></td><td></td></tr></table></body></html>

# 2.2.5 工业领域意图识别模型

对决策库数据进行随机测试，通过用户的输入进行关键词匹配，针对数据中包含的产品名称或工单号等具有标识性的信息进行检索，将结果进行召回及排序，将最终的结果输出，将是否能输出具体的推荐方案作为性能指标。

表7数据集介绍  

<html><body><table><tr><td>测试项目</td><td>数据集名称</td><td>数据集介绍</td></tr><tr><td>工业领域推 荐算法性能 测试</td><td>江中决策库</td><td>包含105370条生产决策信息，主要有工单信息、产 品的配方信息、物料信息以及工艺状态信息等等。</td></tr></table></body></html>

测试过程：

1．在江中数据的决策库中，筛选具有唯一性的标识信息作为每个工单的特征（如产品名称），并以此作为关键词匹配的依据。当用户输入完成后，模型将对数据进行召回，因为数据量过大难以进行更加精确的偏好和质量评估，因此，在排序阶段需要对召回结果进行统一准确的打分排序。

2．用户输入待查的关键词，算法通过关键词匹配的方式对数据进行查询。

![](images/d638c3d925e5af4e1258904bb382a483f5ec17ce23fb4fe915373a84732a368a.jpg)  
图8关键词输入示意图  
图9推荐结果及完善度评价

3.系统将根据用户的输入在各词条对应的数据中进行比对，返回查询到的结果数量并将这些结果进行排序，然后将最合适的方案输出。

请输入产品名称：  
与该产品相关的信息共有71299项  
以下是该产品的推荐方案：  
工单号为W23051053的工单状态为生产终止工单，该工单生产的产品是乳酸苗素片（两盒装）0.4g\*8片\*8板\*150盒/箱，相应的配方名称为乳酸菌素片0.方案完善度：较完善  
准确率：72.56  
GET v http://127.0.0.1:5000/get_product_info?product_name=健胃滑食片 Send  
Params Authorization Headers (6) Body Pre-request Script Tests Settings Cookies  
Query ParamsKEY VALUE DESCRIPTION e Bulk Edit□ product_name 健胃消食片Key Value Description  
Body Cookies Headers (5) Test Results Θ Status: 200 OK Time: 170 ms Size: 1.68 KB Save Response vPretty Raw Prevlew Visualize JSDN v \$ □ Q1 3 二2 "nun_results": 15368,3 1ecomnendati1on"：“工单号为W218618023的工单状态为生产终止工单，产品是健胃消食片（无糖型），相应的配方名称为健胃消食片(无糖型）8.8g/片，其中包合山药粉，其参考壺量为287.95kg，太子套粉，其参考勉量为192.02kg，甘露醛，其蒙考致量为549.7kg，山梨醇，其参考数量为137.42kg，敬晶纤维素，其参考致量为67.2kg，碳胞酸镁，其梦考数量为16.BBkg，黄色薄膜包衣粉，其梦考数量为48.6kg，乙醇，其梦考数量为163kg，生产设备是FL-586涕聘制粒机，此产品的制作工艺为江中_健胃消食片(成人）_主PI，工艺垫数名称是临时文本参数，其工艺编码是JZ_JMXSP_CR_MAIN，其值为日,生产该产品所需的工作人员需熟练掌握FL-58沸腮制粒机相关操作"，4 “准确率"；"85.13”，5 “方案完善度"：“完善”6 二

表8工业领域推荐算法性能检测数据记录表  

<html><body><table><tr><td>测试项目</td><td>技术要求</td><td>检验结果</td><td>判定</td></tr><tr><td>工业领域推1、推荐结果的数量; 测试</td><td>荐算法性能2、输出推荐方案并评价推荐结果的准确率达到 65%以上。</td><td></td><td></td></tr></table></body></html>

# 2.2.6工业领域知识图谱推理算法

对知识推理算法的推理补全效果进行评估，推理得到的新三元组规模越大说明推理效果越好，在有限的原始输入的情况下，得到的结果越多，说明规则库中的规则质量越高。

# 表9数据集介绍

<html><body><table><tr><td>测试项目</td><td>数据集名称</td><td>数据集介绍</td></tr><tr><td>工业领域知识 图谱推理算法</td><td>保隆数据集</td><td>包含14万条三元组信息，4万多个实体和10种类型 的关系。</td></tr></table></body></html>

测试过程：

1.通过对保隆故障溯源知识图谱与故障溯源业务的分析，抽取出先验规则。

2.使用数据处理技术将规则处理成推理引擎需要的标准格式。

3.通过意图模块传入的主实体信息，查找目标子图，然后使用系统的推理模块进行推理。

4.系统返回经过规则补全后的目标子图数据。  
5.将原始数据规模与推理之后的数据规模进行计算的到新推出的三元组数据数量，该数量越高表明推理效果越好。

![](images/b7e71303334f2756cc445ef17bec96f2c1d4ba286efa9bdb93c5351a3bc36de5.jpg)  
在不同的数据规模下测试结果如下：

![](images/3c8d260afa25adcbfffeab0f766e6e8f8d6f75f7b9b8681d82dc828616445c14.jpg)  
图11推理产品ID为112332的目标图谱

![](images/e4129eeb8d9ce4545e0e0f996f9b6ddc0154f0f98360c5d8cae96fa43e28e574.jpg)  
图12推理产品ID为132344的目标图谱

![](images/c0f913127f309a91024c46450a00f0381fd8ab39909ba206ca58278aa97a2023.jpg)  
图13推理产品ID为325432的目标图谱

![](images/6174750d133ede530e2a62ab6183b1fa8f632c724f24b96806ea252584df14a3.jpg)  
图14推理产品ID为435463的目标图谱

图15不同的产品数据推理得到的结果对比图

# 预期结果：

推理新增数据量超过原有数据的 $5 5 \%$ 0

表10工业领域推理算法测试结果数据记录表  

<html><body><table><tr><td>测试项目</td><td>技术要求</td><td>检验结果</td><td>判定</td></tr><tr><td>任务</td><td>在图谱化数据集上推理补全得到新三元组 数量高于原始数据量的55%</td><td></td><td></td></tr></table></body></html>

# 3 测试环境

# 3.1工业领域百万级数据分布式存储

# 3.1.1硬件环境

本测试中，硬件环境主要是指计算机的硬件配置，所采用的计算机为多核CPU与众核GPU共存的CPU/GPU 异构并行移动工作站，其具体配置如下。

① CPU处理器：IntelXeonE5-262016 核64位，具体配制参数见下表。

表5CPU处理器配制参数  

<html><body><table><tr><td>CPU系列</td><td>Intel Xeon E5-2620</td></tr><tr><td>CPU架构</td><td>64位</td></tr><tr><td>核心数量</td><td>十六核心</td></tr><tr><td>主频</td><td>2.10GHz</td></tr></table></body></html>

②) GPU 加速部件：NVIDIA GeForce GTX Titan X，其具体配制参数见下表。

表6NVIDIA GeForceGTX TitanX 显卡配制参数  

<html><body><table><tr><td>参数名</td><td>参数值</td></tr><tr><td>核心数量</td><td>3072</td></tr><tr><td>显存容量</td><td>12 GB</td></tr><tr><td>显存类型</td><td>GDD R5X</td></tr><tr><td>显存位宽</td><td>384bit</td></tr><tr><td>显存带宽</td><td>336.5GB/s</td></tr><tr><td>最大功耗</td><td>250W</td></tr></table></body></html>

$\textcircled{3}$ 内存：存储量64GB。

# 3.2工业领域索引算法性能检测

# 3.2.1 硬件环境

本测试中，硬件环境主要是指计算机的硬件配置，所采用的计算机为多核CPU与众核GPU共存的CPU/GPU 异构并行移动工作站，其具体配置如下。

① CPU处理器：IntelXeonE5-262016 核64位，具体配制参数见下表。

表7CPU处理器配制参数  

<html><body><table><tr><td>CPU系列</td><td>Intel(R) Xeon(R) Gold 6226R</td></tr><tr><td>CPU架构</td><td>64位</td></tr><tr><td>核心数量</td><td>十六核心</td></tr><tr><td>主频</td><td>2.90GHz</td></tr></table></body></html>

② GPU加速部件：NVIDIACorporation TU102，其具体配制参数见下表。

表 8NVIDIA Corporation TU102 显卡配制参数  

<html><body><table><tr><td>参数名</td><td>参数值</td></tr><tr><td>核心数量</td><td>4608</td></tr><tr><td>显存容量</td><td>24GB</td></tr><tr><td>显存类型</td><td>GDDR5X</td></tr><tr><td>显存位宽</td><td>384bit</td></tr><tr><td>显存带宽</td><td>336.5GB/s</td></tr><tr><td>最大功耗</td><td>280W</td></tr></table></body></html>

$\textcircled{3}$ 内存：存储量64GB。

# 3.2.2软件环境

软件环境主要包括操作系统版本、测试需要的依赖库、配套软件

设备等。

① 操作系统：Ubuntu 20.04.4 LTS 64位。  
② 软件依赖库：

1.GPU运行环境动态链接库： cudart64_11.dll,cublas64_11.dll,cudnn64_8.dll,curand64_

11.dll,pthreadGC2.dll,pthreadvC2.dll。 2.其他依赖动态链接库：Pytorch3.整体Python环境依赖:Python $3 . 8 . 0 +$ Flask

# 4 测试时间地点

(1)测试时间：2023年12月。(2)测试地点：上海工程技术大学松江校区

# 5参考文献

[1] Rendle S. Factorization machines[C]//2O10 IEEE International conference on data mining. IEEE, 2010: 995-1000.

[2] Bordes A, Usunier N, Garcia-Duran A, et al. Translating embeddings for modeling multi-relational data[J]. Advances in neural information processing systems,2013, 26.